package TimeKeeperApplication;

import java.io.IOException;
import java.io.ObjectOutputStream;
import java.io.OutputStream;
import java.net.Socket;
import java.net.UnknownHostException;
import java.util.ArrayList;

public class DataTransferClient {

	private Socket socket;
	private OutputStream outputStream;
	private ObjectOutputStream objectOutputStream ;
	private ArrayList<Object> ObjectsToSend;
	/**
	 * @param socket
	 */
	public DataTransferClient() {
		ObjectsToSend = new ArrayList<>();
	}

	public void connect() throws UnknownHostException, IOException {
		// need host and port, we want to connect to the ServerSocket at port 7777
		this.socket = new Socket("127.0.0.1", 7778);
		System.out.println("Connected!");
		// get the output stream from the socket.
		 outputStream = socket.getOutputStream();
		// create an object output stream from the output stream so we can send an
		// object through it
		 objectOutputStream = new ObjectOutputStream(outputStream);
	}

	public void send(ArrayList<Object> ObjectsToSendArray) throws IOException {

		
		this.ObjectsToSend = ObjectsToSendArray;

		System.out.println("Envoie d'objets au serveur");
		objectOutputStream.writeObject(ObjectsToSend);

		System.out.println("Fermeture de connexion");
		socket.close();
	}

}
